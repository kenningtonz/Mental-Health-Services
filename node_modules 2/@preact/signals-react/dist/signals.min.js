!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@preact/signals-core"),require("react"),require("use-sync-external-store/shim/index.js"),require("react/jsx-runtime"),require("react/jsx-dev-runtime")):"function"==typeof define&&define.amd?define(["exports","@preact/signals-core","react","use-sync-external-store/shim/index.js","react/jsx-runtime","react/jsx-dev-runtime"],e):e((n||self).reactSignals={},n.preactSignalsCore,n.react,n.index_js,n.a,n.s)}(this,function(n,e,t,r,i,u){function f(n){return n&&"object"==typeof n&&"default"in n?n.default:n}var o=/*#__PURE__*/f(t),c=/*#__PURE__*/f(i),l=/*#__PURE__*/f(u),s=null,a=!1,v=null,d=new Map;function p(n){if(!n)return 1;var e,t=d.get(n);if(void 0!==t)return t;var r=n.useCallback.toString();if(n.useReducer===n.useEffect)e=1;else if(n.useEffect===n.useImperativeHandle)e=32;else if(/Invalid/.test(r))e=2;else if(/updateCallback/.test(r)||/\[0\]/.test(r)&&/\[1\]/.test(r)){var i=n.useReducer.toString();if(/rerenderReducer/.test(i)||/return\s*\[\w+,/.test(i))e=16;else e=8}else e=4;d.set(n,e);return e}var b=[],y=Symbol.for("react.element"),h=function(){};function m(n){if("function"!=typeof n)return n;else return function(t,r){if("string"==typeof t&&r)for(var i in r){var u=r[i];if("children"!==i&&u instanceof e.Signal)r[i]=u.value}return n.call.apply(n,[n,t,r].concat([].slice.call(arguments,2)))}}var g,x,j=Symbol.dispose||Symbol.for("Symbol.dispose");function S(n,e){var t=e.effect.S();g=e;return q.bind(e,n,t)}function q(n,e){e();g=n}({u:0,effect:{s:void 0,c:function(){},S:function(){return h},d:function(){}},subscribe:function(){return h},getSnapshot:function(){return 0},S:function(){},f:function(){}})[j]=function(){};var w=Promise.prototype.then.bind(Promise.resolve());function B(n){if(void 0===n)n=0;!function(){if(!x)x=w(function(){var n;x=void 0;null==(n=g)||n.f()})}();var i=t.useRef();if(null==i.current)i.current=function(n){var t,r,i,u,f=0,o=e.effect(function(){r=this});r.c=function(){f=f+1|0;if(u)u()};return(t={u:n,effect:r,subscribe:function(n){u=n;return function(){f=f+1|0;u=void 0;o()}},getSnapshot:function(){return f},S:function(){if(null!=g){var n=g.u,e=this.u;if(0==n&&0==e||0==n&&1==e){g.f();i=S(void 0,this)}else if(1==n&&0==e||2==n&&0==e);else i=S(g,this)}else i=S(void 0,this)},f:function(){null==i||i();i=void 0}})[j]=function(){this.f()},t}(n);var u=i.current;r.useSyncExternalStore(u.subscribe,u.getSnapshot,u.getSnapshot);u.S();return u}Object.defineProperties(e.Signal.prototype,{$$typeof:{configurable:!0,value:y},type:{configurable:!0,value:function(n){var e=n.data,t=B(1);try{return e.value}finally{t.f()}}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});!function(){Object.defineProperty(t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher,"current",{get:function(){return v},set:function(n){if(!a){var e=p(v),t=p(n);v=n;if(function(n,e){if(1&n&&28&e)return!0;else if(2&n||2&e)return!1;else return!1}(e,t)){a=!0;s=B(1);a=!1}else if(function(n,e){return Boolean(28&n&&16&e)}(e,t)){var r;null==(r=s)||r.f();a=!0;s=B(1);a=!1}else if(function(n,e){return Boolean(28&n&&1&e)}(e,t)){var i;null==(i=s)||i.f();s=null}}else v=n}});!function(){var n=c,e=l;o.createElement=m(o.createElement);e.jsx&&(e.jsx=m(e.jsx));n.jsx&&(n.jsx=m(n.jsx));e.jsxs&&(e.jsxs=m(e.jsxs));n.jsxs&&(n.jsxs=m(n.jsxs));e.jsxDEV&&(e.jsxDEV=m(e.jsxDEV));n.jsxDEV&&(n.jsxDEV=m(n.jsxDEV))}()}();n.Signal=e.Signal;n.batch=e.batch;n.computed=e.computed;n.effect=e.effect;n.signal=e.signal;n.untracked=e.untracked;n.useComputed=function(n){var r=t.useRef(n);r.current=n;return t.useMemo(function(){return e.computed(function(){return r.current()})},b)};n.useSignal=function(n){return t.useMemo(function(){return e.signal(n)},b)};n.useSignalEffect=function(n){var r=t.useRef(n);r.current=n;t.useEffect(function(){return e.effect(function(){return r.current()})},b)}});//# sourceMappingURL=signals.min.js.map
